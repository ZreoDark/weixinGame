{"version":3,"sources":["assets/script/playerControl.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AACM,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAA2C,iCAAY;IAAvD;QAAA,qEAqDC;QAlDG,eAAS,GAAa,IAAI,CAAC;QAC3B,iBAAW,GAAW,KAAK,CAAC;;QAgD5B,iBAAiB;IACrB,CAAC;IAhDG,wBAAwB;IAExB,8BAAM,GAAN;QACI,IAAG,EAAE,CAAC,QAAQ,CAAC,QAAQ,EAAE,EAAC;YACtB,EAAE,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;SACxB;IACL,CAAC;IACD,oFAAoF;IACpF,6BAAK,GAAL;QAAA,iBAoBC;QAnBG,EAAE,CAAC,QAAQ,CAAC,mBAAmB,EAAE,CAAC,OAAO,GAAG,IAAI,CAAC;QACjD,qBAAqB;QACrB,0BAA0B;QAC1B,uBAAuB;QACvB,2BAA2B;QAC3B,0BAA0B;QAC1B,QAAQ;QACP,MAAM;QACP,iBAAiB;QACjB,IAAI,CAAC,QAAQ,CAAC;YACV,UAAU;YACV,yBAAyB;YACzB,IAAI,MAAM,GAAG,EAAE,CAAC,WAAW,CAAC,KAAI,CAAC,SAAS,CAAC,CAAC;YAC5C,OAAO;YACP,MAAM,CAAC,SAAS,CAAC,EAAE,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC;YAClD,oBAAoB;YACpB,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;YACrC,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;QAC9C,CAAC,EAAC,GAAG,CAAC,CAAA;IACV,CAAC;IACD,2BAAG,GAAH,UAAI,KAAK;QAAT,iBAiBC;QAhBG,QAAQ;QACJ,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,gBAAgB,EAAC,EAAE,CAAC,WAAW,EAAC,UAAC,GAAG,EAAC,GAAG;YACtD,KAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,WAAW,GAAG,GAAG,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;YAChF,UAAU,CAAC;gBACP,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC,IAAI,EAAE,CAAC;YACnE,CAAC,EAAC,GAAG,CAAC,CAAC;YACP,UAAU,CAAC;gBACP,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC,KAAK,EAAE,CAAC;gBAC1D,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;gBACzC,EAAE,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;gBACpB,QAAQ;gBACR,IAAG,KAAI,CAAC,IAAI,EAAC;oBACT,KAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;iBACvB;YACL,CAAC,EAAC,GAAG,CAAC,CAAA;QACV,CAAC,CAAC,CAAA;IACV,CAAC;IAhDD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;oDACO;IAHV,aAAa;QADjC,OAAO;OACa,aAAa,CAqDjC;IAAD,oBAAC;CArDD,AAqDC,CArD0C,EAAE,CAAC,SAAS,GAqDtD;kBArDoB,aAAa","file":"","sourceRoot":"/","sourcesContent":["import BulletControl from \"./bulletControl\";\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class PlayerControl extends cc.Component {\n\n    @property(cc.Prefab)\n    bulletPre:cc.Prefab = null;\n    isCollision:boolean = false;\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        if(cc.director.isPaused()){\n            cc.director.resume();\n        }\n    }  \n    //生命周期：onLoad -> onEnable -> start -> update -> lateUpdate -> onDisable -> onDestroy\n    start () {\n        cc.director.getCollisionManager().enabled = true;\n        //箭头函数和普通函数的this指向问题：\n        //箭头函数的this：指向定义时所处上下文的对象,\n        //普通函数的this：指向调用该函数的对象，\n        //在这里如果用普通函数的话，this指向window\n        //如果用箭头函数的话，this指向player节点\n        //监听手指移动\n         //飞机攻击\n        //计时器，每0.5秒创造一个子弹\n        this.schedule(()=>{\n            //将子弹变成预制体\n            //cc.instantiate()：创建预制节点\n            let bullet = cc.instantiate(this.bulletPre);\n            //设置父物体\n            bullet.setParent(cc.find('Canvas/bulletContent'));\n            //设置子弹位置            \n            bullet.x = cc.find('Canvas/hero1').x;\n            bullet.y = cc.find('Canvas/hero1').y + 60;\n        },0.2)\n    }\n    die(index){\n        //动态加载资源\n            cc.loader.loadRes('image/imageAny',cc.SpriteAtlas,(err,res)=>{\n                this.node.getComponent(cc.Sprite).spriteFrame = res.getSpriteFrame('hero1_die');\n                setTimeout(()=>{\n                    cc.find('Canvas/audioDie').getComponent(cc.AudioSource).play();\n                },100);\n                setTimeout(()=>{\n                    cc.find('Canvas/bg').getComponent(cc.AudioSource).pause();\n                    cc.find('Canvas/gameOver').active = true;\n                    cc.director.pause();\n                    //我方飞机销毁\n                    if(this.node){\n                        this.node.destroy();\n                    } \n                },400)\n            })\n    }\n    // update (dt) {}\n}\n"]}